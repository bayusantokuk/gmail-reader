<!DOCTYPE html>
<html>
<head>
  <title>Your Gmail Inbox</title>
</head>
<body>
  <h1>Your Gmail Inbox</h1>
  <div id="email-list">Loading...</div>

  <script>
    async function loadEmails() {
      const container = document.getElementById('email-list');
      try {
        const res = await fetch('/api/emails');
        const data = await res.json();

        if (!data.emails || data.emails.length === 0) {
          container.innerHTML = "Inbox kosong";
          return;
        }

        container.innerHTML = "";
        data.emails.forEach(email => {
          const div = document.createElement('div');
          div.innerHTML = `<strong>From:</strong> ${email.from} <br>
                           <strong>Subject:</strong> ${email.subject} <br>
                           <em>${email.snippet}</em>
                           <hr>`;
          container.appendChild(div);
        });
      } catch (err) {
        container.innerHTML = "Gagal memuat email";
        console.error(err);
      }
    }

    loadEmails();
  </script>
</body>
</html>
